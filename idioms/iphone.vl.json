{
  "$schema": "https://vega.github.io/schema/vega-lite/v6.json",
  "background": "#f2f2f2",
  "autosize": {"type": "fit", "contains": "padding"},
  "data": {
    "url": "https://raw.githubusercontent.com/lawchrisss/FIT3179_DataVisualisation2/refs/heads/main/datasets/days_to_own.csv",
    "format": {"type": "csv"}
  },
  "transform": [
    {
      "filter": "indexof(['Switzerland','Singapore','United States','Australia','United Arab Emirates','South Korea','Japan','China','Malaysia','Brazil', 'India'], datum.Country) > -1"
    },
    {
      "calculate": "datum.Country === 'United Arab Emirates' ? 'Emirates' : datum.Country",
      "as": "CountryLabel"
    },
    {"calculate": "toNumber(datum.Days_Needed)", "as": "days"},
    {"calculate": "1", "as": "days_per_emoji"},
    {"calculate": "45", "as": "wrap_per_row"},
    {"calculate": "ceil(datum.days / datum.days_per_emoji)", "as": "icons"},
    {"calculate": "sequence(0, datum.icons)", "as": "arr"},
    {"flatten": ["arr"]},
    {"calculate": "datum.arr", "as": "i"},
    {"calculate": "datum.i % datum.wrap_per_row", "as": "col"},
    {"calculate": "floor(datum.i / datum.wrap_per_row)", "as": "row"}
  ],
  "facet": {
    "row": {
      "field": "CountryLabel",
      "type": "nominal",
      "sort": {"field": "days", "op": "max", "order": "ascending"},
      "header": {
        "title": null,
        "labelAngle": 0,
        "labelAlign": "left",
        "labelPadding": 20,
        "labelFontSize": 16,
        "labelFontWeight": "bold"
      }
    }
  },
  "spec": {
    "width": 950,
    "height": 55,
    "mark": {"type": "text", "baseline": "middle", "align": "center"},
    "encoding": {
      "x": {
        "field": "col",
        "type": "quantitative",
        "axis": null,
        "scale": {"domain": [-0.5, 39]}
      },
      "y": {
        "field": "row",
        "type": "ordinal",
        "axis": null,
        "sort": "descending",
        "scale": {"paddingInner": 0, "paddingOuter": 0}
      },
      "text": {"value": "ï£¿"},
      "size": {"value": 32},
      "color": {
        "condition": [
          {"test": "datum.CountryLabel === 'Switzerland'", "value": "#FFD700"},
          {"test": "datum.CountryLabel === 'Brazil'", "value": "#d62728"},
          {"test": "datum.CountryLabel === 'Malaysia'", "value": "#00008B"}
        ],
        "value": "#9e9e9e"
      },
      "tooltip": [
        {"field": "CountryLabel", "title": "Country"},
        {"field": "days", "title": "Days"}
      ]
    }
  },
  "bounds": "flush",
  "padding": 0,
  "resolve": {"scale": {"y": "independent"}},
  "config": {"view": {"stroke": null}, "axis": {"grid": false}}
}
