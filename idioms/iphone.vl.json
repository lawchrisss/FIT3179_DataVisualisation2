{
  "$schema": "https://vega.github.io/schema/vega-lite/v6.json",
  "background": "#f2f2f2",
  "data": {
    "url": "https://raw.githubusercontent.com/lawchrisss/FIT3179_DataVisualisation2/refs/heads/main/datasets/days_to_own.csv",
    "format": { "type": "csv" }
  },
  "transform": [
    { "filter": "datum.Country !== 'Nigeria'" },
    { "calculate": "datum.Country === 'United Arab Emirates' ? 'Emirates' : datum.Country", "as": "CountryLabel" },
    { "calculate": "toNumber(datum.Days_Needed)", "as": "days" },
    { "calculate": "1", "as": "days_per_emoji" },
    { "calculate": "30", "as": "wrap_per_row" },
    { "calculate": "ceil(datum.days / datum.days_per_emoji)", "as": "icons" },
    { "calculate": "sequence(0, datum.icons)", "as": "arr" },
    { "flatten": ["arr"] },
    { "calculate": "datum.arr", "as": "i" },
    { "calculate": "datum.i % datum.wrap_per_row", "as": "col" },
    { "calculate": "floor(datum.i / datum.wrap_per_row)", "as": "row" }
  ],
  "facet": {
    "row": {
      "field": "CountryLabel",
      "type": "nominal",
      "sort": { "field": "days", "op": "max", "order": "ascending" },
      "header": { "title": null, "labelAngle": 0, "labelAlign": "right", "labelPadding": 6, "labelFontSize": 13 }
    },
    "columns": 1
  },
  "spec": {
    "width": 720,
    "height": { "step": 20 },
    "mark": { "type": "text", "baseline": "middle", "align": "center" },
    "encoding": {
      "x": { "field": "col", "type": "quantitative", "axis": null, "scale": { "domain": [-0.5, 29.5] } },
      "y": { "field": "row", "type": "quantitative", "axis": null, "sort": "descending" },
      "text": { "value": "ðŸ“±" },
      "size": { "value": 20 },
      "tooltip": [
        { "field": "CountryLabel", "title": "Country" },
        { "field": "days", "title": "Days" }
      ]
    }
  },
  "bounds": "flush",
  "padding": 0,
  "config": { "view": { "stroke": null }, "axis": { "grid": false } }
}
